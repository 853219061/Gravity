<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
/* 
        html,body{
            height : 100%;
            width : 100%;
        } */

    
    div{
        width : 100px;
        height: 100px;
        background-color : red;
        border-radius: 50%;
        position : absolute;
    }
    
    </style>
    <title>重力加速度运动</title>
</head>
<body>
    <div></div>
    <script>    
        var oDiv = document.getElementsByTagName('div') [0];
        oDiv.onclick = function(){
            startMove(this)
        }

function startMove(dom){
    clearInterval(dom.timer);
    var iSpeedX = 6;
    var iSpeedY = 6;
    var  g = 3;
    dom.timer = setInterval(function(){
        iSpeedY += 3;
        var newTop  = dom.offsetTop + iSpeedY ;
        var newLeft = dom.offsetLeft +iSpeedX;
        
       

        if( newTop  >= document.documentElement.clientHeight - dom.clientHeight){
            iSpeedY *= -1;
            newTop = document.documentElement.clientHeight - dom.clientHeight
            iSpeedY *=0.8;
            iSpeedX *=0.8;
        }

        if(newTop <= 0 ){
        iSpeedY *=-1;
        newTop = 0;  
        iSpeedY *=0.8;
        iSpeedX *=0.8;   
        }

        if(newLeft <= 0 ){
        iSpeedX *=-1;
        newLeft = 0;    
        iSpeedY *=0.8;
        iSpeedX *=0.8;
        }

        if( newLeft  >= document.documentElement.clientWidth - dom.clientWidth){
            iSpeedX *= -1;
            newLeft = document.documentElement.clientWidth - dom.clientWidth;
            iSpeedY *=0.8;
            iSpeedX *=0.8;
        }


        if(Math.abs(iSpeedX )<1){
            iSpeedX = 0;
        }


        if(Math.abs(iSpeedY) <1){
            iSpeedY = 0;
        }

        if(iSpeedX ==0 && iSpeedY == 0 
        && newTop == document.documentElement.clientHeight - dom.clientHeight
        ){
            clearInterval(dom.timer);
            console.log('over');
        }else{
         dom.style.top = newTop + 'px';
         dom.style.left = newLeft  + 'px';
        }


      

    },30)
}


    </script>
</body>
</html>